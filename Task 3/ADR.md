### Название задачи: Архитектура MVP онлайн-открытия депозитов
### Автор: Архитектор Михаил
### Дата: 14-07-2025

---

### Функциональные требования (Use Cases)
| №  | Действующие лица/системы    | Use Case                          | Описание                                                     |
|----|-----------------------------|-----------------------------------|--------------------------------------------------------------|
| 1  | Клиент                      | Подача заявки через сайт          | Ввод ФИО + телефона -> передача в кол-центр                  |
| 2  | Клиент                      | Подача заявки через интернет-банк | Выбор счёта + суммы -> SMS-подтверждение -> интеграция с АБС |
| 3  | Кол-центр                   | Обработка заявки                  | Звонок клиенту -> ручное подтверждение в АБС                 |

---

### Нефункциональные требования
| №  | Требование                          |
|----|-------------------------------------|
| 1  | Время отклика <500 мс для заявок    |
| 2  | Шифрование данных (HTTPS/TLS)       |
| 3  | Доступность 99.9%                   |

---

### Решение
**Диаграммы:**
1. Контекст (уровень C4/L1) — взаимодействие систем.
2. Контейнеры (уровень C4/L2) — детализация интернет-банка и АБС.

**Логика выбора:**
1. Чтобы минимизировать риски для АБС используем асинхронную интеграцию через Kafka вместо прямых вызовов API АБС, так как АБС уже перегружена (требование R2 из FURPS+) и вертикальное масштабирование Oracle ограничено (ограничение +R3). Буферизация запросов снижает пиковые нагрузки на АБС.
2. Чтобы обеспечить производительность подключаем Redis для кэширования ставок (требование P1 <500 мс) и оптимизируем SQL-запросы к справочникам (требование P3 <200 мс). Эти решения позволяют достичь целевых показателей скорости без переработки legacy-кода АБС.
3. Чтобы соблюсти ограничения текущего IT-ландшафта используем существующие технологии (.NET для интернет-банка, Java для кол-центра) совместимые с текущими СУБД (MS SQL для интернет-банка, Oracle для АБС). Отказываемся от микросервисов (кроме изолированного модуля депозитов).из-за неготовности платформы.
4. Обеспечиваем надежность за счет реализации резервного ЦОД (требование R1 99.9% uptime) и горизонтального масштабирования веб-сервисов (в отличие от вертикального в АБС).

---

### Альтернативы
1. **Прямая интеграция с АБС**
   - *Риски:* Перегрузка АБС, нарушение SLA.
2. **Ручная обработка без автоматизации**
   - *Недостатки:* Медленно, дорого.
